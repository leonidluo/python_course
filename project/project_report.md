# 《Python程序设计基础》程序设计作品说明书

题目： 你选择的项目题目

学院： 21计科02

姓名： 刘鑫

学号： B20210302211

指导教师： 周景

起止日期：2023.11.10-2023.12.10

## 摘要

本项目实现了一个扫雷游戏，使用Python和Pygame库。关键工作包括游戏逻辑、图形界面设计，以及背景音乐的添加。通过定义地雷块、游戏状态等元素，成功实现了扫雷核心逻辑。Pygame库用于创建游戏窗口和图标，处理鼠标事件，增加交互性。背景音乐功能通过pygame.mixer模块实现，为游戏增添音频元素。项目整体结构简洁，成功实现了一个富有趣味性的扫雷游戏。

关键词：**扫雷、Python、Pygame、游戏开发、图形界面、背景音乐**

## 第1章 需求分析


1. **经典扫雷游戏逻辑：** 实现标准扫雷游戏规则，包括地雷布置、点击方块、标记雷区等功能。

2. **图形用户界面：** 使用Pygame库创建直观友好的图形用户界面，展示游戏窗口、方块图标等元素。

3. **游戏状态管理：** 实现游戏的各种状态，包括游戏开始、进行中、游戏失败和游戏胜利等。

4. **计时和雷数显示：** 在界面上显示游戏进行时间和未标记地雷数量，帮助玩家监控游戏进度。

5. **鼠标交互：** 处理鼠标点击事件，实现左键点击方块、右键标记地雷、左右键同时点击等操作。

6. **游戏结束判定：** 在点击方块时判断是否触发地雷，若触发则游戏失败，若所有非地雷方块都被点击则游戏胜利。

7. **背景音乐功能：** 增加背景音乐，为游戏提供更丰富的音频体验。

8. **用户体验优化：** 包括错误标记提示、双击周围方块一键展开等操作，提高游戏的易用性和趣味性。

这些功能旨在提供一款符合玩家期望、操作简便且富有娱乐性的扫雷游戏。系统的设计目标是通过这些功能解决用户在游戏中遇到的问题，提供愉悦的游戏体验。

## 第2章 分析与设计

### 2.1 系统架构

扫雷游戏系统采用经典的客户端应用程序架构。主要分为图形用户界面（GUI）和游戏逻辑两个核心模块。GUI负责用户交互和显示，游戏逻辑处理游戏规则和状态。
```mermaid

graph TD
  subgraph GUI
    A["游戏窗口"] -->|显示游戏界面| B["UI 模块"]
    B -->|处理用户交互| C["游戏逻辑"]
  end

  subgraph "游戏逻辑"
    D["游戏逻辑"] -->|管理扫雷方块| E["MineBlock 类"]
    D -->|实现游戏规则| F["游戏模块"]
  end

  subgraph "背景音乐"
    G["音频模块"] -->|管理背景音乐| H["pygame.mixer"]
  end

``````
### 2.2 系统流程

系统的主要流程如下：

1. **启动游戏：** 用户运行程序，初始化游戏窗口和游戏逻辑。

2. **游戏准备：** 显示初始游戏状态，等待用户点击开始按钮。

3. **游戏进行：** 用户点击方块，触发相应的游戏逻辑。判断是否点击到地雷，更新游戏状态和计时器。

4. **游戏结束：** 判断游戏胜利或失败条件，显示相应的结束状态。

5. **重新开始：** 用户选择重新开始，回到游戏准备阶段。

### 2.3 系统模块

系统主要包括以下模块：

- **Game Module：** 实现游戏逻辑，包括地雷布局、方块状态管理、游戏状态判定等。
- **UI Module：** 使用Pygame库创建图形用户界面，处理用户交互和显示。
- **Audio Module：** 使用`pygame.mixer`实现背景音乐功能。

### 2.4 数据结构与算法

#### 数据结构

1. **Mine类：** 表示每个方块的状态和属性，包括坐标、是否为地雷、周围地雷数量等。
2. **MineBlock类：** 表示整个游戏区域，包含一个二维数组，每个元素是一个Mine对象。

#### 算法

1. **地雷布局算法：** 使用随机数算法，在游戏开始时随机生成地雷的位置。
2. **方块点击算法：** 判断点击的方块是否为地雷，根据周围地雷数量更新方块状态，递归展开周围无雷的方块。
3. **游戏结束判定算法：** 判断游戏是否胜利或失败，根据点击的方块和地雷分布情况进行判断。




## 第3章 软件测试


### 3.1 单元测试

在扫雷游戏项目中，我们将以类和函数为单位进行单元测试，确保每个模块的功能和逻辑正确。



#### 3.1.1 Game Module 的单元测试

**测试目标：** Game Module 中游戏逻辑是否正确。

**测试用例：**
1. 模拟点击一个非地雷方块，检查方块状态是否正确更新。
2. 模拟点击一个地雷方块，检查游戏状态是否正确判定为失败。
3. 模拟点击所有非地雷方块，检查游戏状态是否正确判定为胜利。
4. 模拟标记地雷并点击所有非地雷方块，检查游戏状态是否正确判定为胜利。

**测试报告：** 测试通过，Game Module中的游戏逻辑符合预期。

#### 3.1.3 UI Module 的单元测试

**测试目标：** UI Module 中用户界面的显示和交互是否正确。

**测试用例：**
1. 检查游戏窗口是否成功显示。
2. 模拟鼠标点击方块，检查方块状态是否正确更新。
3. 模拟鼠标右键点击标记地雷，检查标记是否正确显示。
4. 模拟鼠标左右键同时点击，检查是否正确执行双击操作。

**测试报告：** 测试通过，UI Module中的用户界面显示和交互符合预期。

#### 3.1.4 Audio Module 的单元测试

**测试目标：** Audio Module 中背景音乐的播放是否正确。

**测试用例：**
1. 检查背景音乐是否成功加载。
2. 检查背景音乐是否正确播放。
3. 模拟游戏结束后停止背景音乐，检查音乐是否停止。

**测试报告：** 测试通过，Audio Module中的背景音乐播放符合预期。



### 3.2 测试报告

| 模块         | 单元测试结果 | 功能测试结果 |
|--------------|--------------|--------------|
| Game Module  | 通过         | 通过         |
| UI Module    | 通过         | 通过         |
| Audio Module | 通过         | 通过         |

综合测试结果，系统各模块的单元测试和功能测试均通过，符合预期要求。

## 结论



### 实现功能总结

在本项目中，主要实现了经典扫雷游戏的基本功能，包括：

1. 游戏窗口的显示和初始化。
2. 扫雷方块的布局和状态管理。
3. 游戏逻辑的实现，包括点击方块、判断游戏胜利或失败等规则。
4. 用户界面的交互操作，支持左键点击、右键标记、左右键双击等功能。
5. 背景音乐的加载和播放功能。

###  达到的目标

1. 实现了一个完整的扫雷游戏，具备基本的游戏功能和规则。
2. 通过单元测试和功能测试，验证了系统的稳定性和正确性。


### 不足之处

1. 暂未实现高级功能：当前版本扫雷游戏仅具备基本功能，未添加高级功能如计时排名、不同难度级别等。
2. 用户界面简陋：UI设计相对简单，可以进一步优化提升用户体验。
3. 缺少存储和记录功能：未实现游戏记录和存档功能，无法保存用户的游戏历史。

### 可改进之处

1. **增加高级功能：** 引入不同难度级别、计时排名等高级功能，提升游戏的趣味性和挑战性。
2. **改进用户界面：** 优化UI设计，增加更多交互元素，提高用户体验。
3. **实现存储和记录功能：** 添加游戏记录、存档和回放功能，使用户能够查看游戏历史。

###  项目总结

本项目实现了一个简单而完整的扫雷游戏，通过模块化的设计和测试确保了系统的可靠性。在今后的改进中，可以引入更多高级功能，提高用户体验，并加强存储和记录功能，使用户能够更好地享受游戏。

## 参考文献
Matthes E. Python编程：从入门到实践[M]. 第三版. 人民邮电出版社, 2016年.